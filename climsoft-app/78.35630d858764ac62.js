"use strict";(self.webpackChunkclimsoft_app=self.webpackChunkclimsoft_app||[]).push([[78],{1147:(I,M,m)=>{m.d(M,{C:()=>p});var s=m(5e3);let p=(()=>{class Z{constructor(){this.unSaved=!0}canDeactivate(a){return!a.canExit||a.canExit()}}return Z.\u0275fac=function(a){return new(a||Z)},Z.\u0275prov=s.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()},7078:(I,M,m)=>{m.r(M),m.d(M,{DataEntryModule:()=>Oo});var s=m(9808),p=m(9461),Z=m(9291),t=m(5e3),a=m(963);const T=function(o){return[o]};function S(o,r){if(1&o&&(t.TgZ(0,"c-nav-item",6),t._uU(1,"\n            "),t.TgZ(2,"a",7),t._uU(3),t.ALo(4,"uppercase"),t.qZA(),t._uU(5,"\n          "),t.qZA()),2&o){const e=r.$implicit,n=r.index;t.oxw();const l=t.MAs(14);t.Q6J("cTabContent",l)("tabPaneIdx",n),t.xp6(2),t.Q6J("routerLink",t.VKq(6,T,e.route)),t.xp6(1),t.hij(" ",t.lcZ(4,4,e.name),"")}}let b=(()=>{class o{constructor(e,n){this.router=e,this.route=n,this.tabs=[{name:"Hourly",route:"hourly",index:0},{name:"Hourly Wind",route:"hourly-wind",index:1},{name:"Daily",route:"daily",index:2},{name:"Monthly",route:"monthly",index:3},{name:"Synoptic 2",route:"synoptic",index:4},{name:"Agro",route:"agro",index:5}]}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.F0),t.Y36(Z.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-entry-base"]],decls:28,vars:1,consts:[["xs","12"],[1,"mb-4"],["variant","tabs"],["aria-disabled","",3,"cTabContent","tabPaneIdx",4,"ngFor","ngForOf"],["dataEntryTabContent","cTabContent"],["xs","12","lg","12","xl","12","xxl","10",1,"p-4"],["aria-disabled","",3,"cTabContent","tabPaneIdx"],["cNavLink","","routerLinkActive","active",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row"),t._uU(1,"\n  "),t.TgZ(2,"c-col",0),t._uU(3,"\n    "),t.TgZ(4,"c-card",1),t._uU(5,"\n      "),t.TgZ(6,"c-card-body"),t._uU(7,"\n        "),t.TgZ(8,"c-nav",2),t._uU(9,"\n          "),t.YNc(10,S,6,8,"c-nav-item",3),t._uU(11,"\n        "),t.qZA(),t._uU(12,"\n        "),t.TgZ(13,"c-tab-content",null,4),t._uU(15,"\n          "),t.TgZ(16,"c-row"),t._uU(17,"\n            "),t.TgZ(18,"c-col",5),t._uU(19,"\n              "),t._UZ(20,"router-outlet"),t._uU(21,"\n            "),t.qZA(),t._uU(22,"\n          "),t.qZA(),t._uU(23,"\n        "),t.qZA(),t._uU(24,"\n      "),t.qZA(),t._uU(25,"\n    "),t.qZA(),t._uU(26,"\n  "),t.qZA(),t._uU(27,"\n"),t.qZA()),2&e&&(t.xp6(10),t.Q6J("ngForOf",n.tabs))},directives:[a.iok,a.Yp0,a.AkF,a.yue,a.rZi,s.sg,a.C$2,Z.lC,a.HOP,a.hL0,Z.yS,a.Vh3,Z.Od],pipes:[s.gd],styles:['.nav-item-link-after[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]:hover:after, .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link.active[_ngcontent-%COMP%]:after{content:"";background-color:#458cff;height:2px;position:absolute;width:100%;left:0;bottom:-1px;transition:all .25s ease 0s;transform:scale(0)}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #eaeaea}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{border:none;color:#141922;border-width:0}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{border:none;color:#141922;position:relative}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]:hover{border:none;color:#141922!important}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link.active[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%] > .nav-link.active[_ngcontent-%COMP%]:hover{border:none;color:#141922!important;font-weight:600;background-color:#fff}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:after, .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after, .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:after{transform:scale(1)}']}),o})(),D=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-agro1"]],decls:7,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1,"Agro Form Sample Content"),t.qZA(),t.TgZ(2,"p"),t._uU(3," This is some placeholder content the "),t.TgZ(4,"strong"),t._uU(5,"Home"),t.qZA(),t._uU(6," tab's associated content. Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps classes to control the content visibility and styling. You can use it with tabs, pills, and any other .nav-powered navigation.\n"),t.qZA())},styles:[""]}),o})();var i=m(3075),_=m(5439),u=(()=>{return(o=u||(u={})).X=" ",o.M="M",o.T="T",o.E="E",o.G="G",o.D="D",u;var o})();const g=["M","T","E","G","D"],y={M:{label:"Missing",class:"btn-light"},T:{label:"Trace",class:"btn-dark"},E:{label:"Estimated",class:"btn-secondary"},G:{label:"Generated",class:"btn-info"},D:{label:"Dubious",class:"btn-warning"}};var A=m(848),H=m(1135),x=m(4691);const F="climsoft/v1";let d=(()=>{class o{constructor(e){this.http=e,this.dailyState$=new H.X(!1)}get dailyState(){return this.dailyState$.asObservable()}getDailyEntry(e,n,l,c,f){return this.updateDailyState({station:e,element:n,monthYear:`${c}-1-${l}`,hour:f}),this.http.GET(`${F}/form_daily2s?station_id=${e}&element_id=${n}&yyyy=${l}&mm=${c}&hh=${f}&limit=25&offset=0`)}addDailyEntry(e){return this.http.POST(`${F}/form_daily2s`,e)}updateDailyEntry(e,n,l,c,f,O){return this.http.PUT(`${F}/form_daily2s/${e}/${n}/${l}/${c}/${f}`,O)}updateDailyState(e){this.dailyState$.next(e)}resetDailyState(){this.dailyState$.next(!1)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.O))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function v(o,r){if(1&o&&(t.TgZ(0,"li"),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Gre("inner ",e.class,""),t.xp6(1),t.hij(" ",e.value," ")}}let h=(()=>{class o{constructor(){}ngOnInit(){console.log(y)}get flags(){return Object.keys(y).map(e=>({key:e,value:y[e].label,class:y[e].class}))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-flag-legend"]],decls:3,vars:1,consts:[[1,"flag-legend"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"ul"),t.YNc(2,v,3,4,"li",1),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",n.flags))},directives:[s.sg],styles:[".flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{font-size:.8rem;padding:.1rem .6rem .2rem;border:1px solid #2a3f4d;border-radius:1.5rem;line-height:.9rem;color:#fff}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-light[_ngcontent-%COMP%]{color:#4f5d73;background-color:#ebedef}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-dark[_ngcontent-%COMP%]{background-color:#4f5d73}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-info[_ngcontent-%COMP%]{background-color:#39f}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-secondary[_ngcontent-%COMP%]{background-color:#9da5b1}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .inner.btn-warning[_ngcontent-%COMP%]{background-color:#f9b115}.flag-legend[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{padding:.1rem}"]}),o})();var C=m(1728),q=m(7352),w=m(1773),E=m(9300);function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li"),t.TgZ(1,"button",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().selectFlag(c)}),t._uU(2),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",n.flagConfig[e].class),t.xp6(1),t.hij(" ",e," ")}}const z=function(o){return{enabled:o}},X=function(o){return{disabled:o}};let Q=(()=>{class o{constructor(e){this._eref=e,this.disabled=!1,this.onSelect=new t.vpe,this.flags=g,this.flagConfig=y,this.activeFlag=u.M,this.toggled=!1}onDocumentClick(e){e.stopPropagation(),this._eref.nativeElement.contains(e.target)||(this.toggled=!1)}ngOnInit(){}ngOnChanges(e){e.flag&&e.flag.currentValue&&(this.activeFlag=e.flag.currentValue)}toggleActive(){this.disabled||(this.toggled=!this.toggled)}get activeLabel(){return this.flagConfig[this.activeFlag].label}selectFlag(e){this.activeFlag=e,this.toggled=!1,this.onSelect.emit(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-flag-picker"]],hostBindings:function(e,n){1&e&&t.NdJ("click",function(c){return n.onDocumentClick(c)},!1,t.evT)},inputs:{flag:"flag",disabled:"disabled"},outputs:{onSelect:"onSelect"},features:[t.TTD],decls:9,vars:12,consts:[[1,"flag-picker",3,"ngClass"],[1,"inner"],[3,"cTooltip","ngClass","click"],["type","button",1,"btn","btn-circle","btn-empty",3,"click"],[1,"p-1"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-circle",3,"ngClass","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"a",2),t.NdJ("click",function(){return n.toggleActive()}),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"ul"),t.TgZ(5,"li"),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.selectFlag(" ")}),t._UZ(7,"span",4),t.qZA(),t.qZA(),t.YNc(8,j,3,2,"li",5),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngClass",t.VKq(8,z,n.toggled)),t.xp6(2),t.Gre("active-flag btn ",n.flagConfig[n.activeFlag].class,""),t.Q6J("cTooltip",n.activeLabel)("ngClass",t.VKq(10,X,n.disabled)),t.xp6(1),t.hij(" ",n.activeFlag," "),t.xp6(5),t.Q6J("ngForOf",n.flags))},directives:[s.mk,a.i9q,s.sg],styles:[".flag-picker[_ngcontent-%COMP%]{position:relative;display:inline-block}.flag-picker[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;position:absolute;left:0;top:2.5rem;padding:0;z-index:10;transition:all ease-in-out .3s;padding:.4rem .1rem;background-color:#edeefa;border:1px solid #cfd0dc;border-radius:1.5rem;box-shadow:#00000040 1px 1px 0 1px}.flag-picker[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:.2rem}.flag-picker.enabled[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block}.flag-picker.enabled[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.flag-picker[_ngcontent-%COMP%]   .active-flag[_ngcontent-%COMP%]{display:inline-block;width:2.5rem;height:2.3rem;padding:.25rem .5rem;border-radius:.5rem;bordeR:1px solid #034566;background-color:#5433a0;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;text-decoration:none}.flag-picker[_ngcontent-%COMP%]   .active-flag.disabled[_ngcontent-%COMP%]{cursor:not-allowed}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-empty[_ngcontent-%COMP%]{border:1px solid #4f5d73;background-color:#ebedef}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-light[_ngcontent-%COMP%]{color:#33434b;background-color:#ebedef}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-dark[_ngcontent-%COMP%]{background-color:#4f5d73}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-secondary[_ngcontent-%COMP%]{color:#33434b;background-color:#9da5b1}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-info[_ngcontent-%COMP%]{background-color:#39f}.flag-picker[_ngcontent-%COMP%]   .active-flag.btn-warning[_ngcontent-%COMP%]{background-color:#f9b115}.btn-circle[_ngcontent-%COMP%]{width:2rem;height:2rem;padding:.3rem 0;border-radius:1.2rem;text-align:center;font-size:.9rem;font-weight:700;line-height:.5rem}"]}),o})(),tt=(()=>{class o{constructor(){this.modified=!1,this.group=new i.cw({key:new i.NI(""),label:new i.NI(""),value:new i.NI(null,i.kI.required),flag:new i.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,E.h)(e=>!this.modified)).subscribe(e=>{console.log(e),this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}selectFlag(e){this.group.controls.flag.setValue(e)}get fg(){return this.group.controls}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-synoptic-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty"},features:[t.TTD],decls:9,vars:4,consts:[[1,"synoptic-data-row",3,"formGroup"],["md","7",1,"py-2","label"],["md","3",1,"py-1"],["formControlName","value","aria-label","value","cFormControl",""],["md","2",1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",4),t._UZ(7,"input",5),t.TgZ(8,"app-flag-picker",6),t.NdJ("onSelect",function(c){return n.selectFlag(c)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.fg.label.value),t.xp6(5),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[a.iok,i.JL,i.sg,a.Yp0,i.Fj,a.oHf,i.JJ,i.u,Q],styles:[".synoptic-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.synoptic-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.synoptic-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.synoptic-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function et(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",31),t.TgZ(1,"div",32),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",34),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function ot(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",35),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onStationSelect(l)}),t.qZA()}}function nt(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",38),t._uU(2," Station selection required."),t.qZA())}function it(o,r){if(1&o&&(t.TgZ(0,"div",36),t.YNc(1,nt,3,0,"div",37),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function rt(o,r){1&o&&(t.TgZ(0,"div",39),t.O4$(),t._UZ(1,"svg",38),t._uU(2," Year and Month is required "),t.qZA())}function lt(o,r){if(1&o&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.Oqu(n.getHoursValue(e))}}function at(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",38),t._uU(2," Hour selection is required."),t.qZA())}function ct(o,r){if(1&o&&(t.TgZ(0,"div",36),t.YNc(1,at,3,0,"div",37),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.hour.errors.required)}}function st(o,r){if(1&o&&(t.TgZ(0,"c-col",44),t._UZ(1,"app-synoptic-form-group",45),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function mt(o,r){if(1&o&&(t.TgZ(0,"c-col",44),t._UZ(1,"app-synoptic-form-group",45),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function _t(o,r){if(1&o&&(t.TgZ(0,"c-col",44),t._UZ(1,"app-synoptic-form-group",45),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function pt(o,r){if(1&o&&(t.TgZ(0,"c-row",41),t.TgZ(1,"c-col",42),t.TgZ(2,"c-row"),t.YNc(3,st,2,3,"c-col",43),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",42),t.TgZ(6,"c-row"),t.YNc(7,mt,2,3,"c-col",43),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.TgZ(9,"c-col",42),t.TgZ(10,"c-row"),t.YNc(11,_t,2,3,"c-col",43),t.ALo(12,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,3,e.formGroups,0,12)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,7,e.formGroups,12,24)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(12,11,e.formGroups,24,33))}}function ut(o,r){1&o&&(t.TgZ(0,"c-alert",46),t._uU(1,"Please select a date to view form."),t.qZA())}function dt(o,r){1&o&&t._UZ(0,"c-spinner",47)}const L=function(o){return{"is-invalid":o}};function gt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(l){return t.CHM(e),t.oxw().onSubmit(l)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,et,6,1,"div",9),t.YNc(15,ot,1,0,"app-station-selection",10),t.YNc(16,it,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"label",12),t._uU(19,"Year/Month/Day"),t.qZA(),t.TgZ(20,"c-input-group",13),t.TgZ(21,"span",14),t.O4$(),t._UZ(22,"svg",15),t.qZA(),t.kcU(),t._UZ(23,"input",16),t.TgZ(24,"input",17),t.NdJ("bsValueChange",function(l){return t.CHM(e),t.oxw().onDateSelection(l)}),t.qZA(),t.YNc(25,rt,3,0,"div",18),t.qZA(),t.qZA(),t.TgZ(26,"c-col",5),t.TgZ(27,"div",6),t.TgZ(28,"label",19),t._uU(29,"Hour"),t.qZA(),t.TgZ(30,"select",20),t.TgZ(31,"option",21),t._uU(32,"Select Hour"),t.qZA(),t.YNc(33,lt,2,2,"option",22),t.qZA(),t.YNc(34,ct,2,1,"div",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"fieldset",4),t.TgZ(36,"legend"),t._uU(37," Carribiean Synoptic Data "),t.qZA(),t.YNc(38,pt,13,15,"c-row",23),t.YNc(39,ut,2,0,"c-alert",24),t.qZA(),t._UZ(40,"hr",25),t.TgZ(41,"c-row"),t.TgZ(42,"c-col",26),t.TgZ(43,"button",27),t.YNc(44,dt,1,0,"c-spinner",28),t._uU(45," Submit "),t.qZA(),t.TgZ(46,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(47," Reset "),t.qZA(),t.TgZ(48,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(49," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(15,L,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(17,L,e.submitted&&e.f.dayMonthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.dayMonthYear.invalid),t.xp6(5),t.Q6J("ngClass",t.VKq(19,L,(e.submitted||e.f.hour.touched)&&e.f.hour.invalid)),t.xp6(3),t.Q6J("ngForOf",e.hoursList),t.xp6(1),t.Q6J("ngIf",e.f.hour.errors),t.xp6(4),t.Q6J("ngIf",e.formGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}const $=[{key:"cloudHeight",label:"Height of Cloud"},{key:"visibility",label:"Visibility"},{key:"cloudCover",label:"Total Cloud Cover"},{key:"windDirection",label:"Wind Direction"},{key:"windSpeed",label:"Wind Speed"},{key:"dryBulb",label:"Dry Bulb"},{key:"wetBulb",label:"Wet Bulb"},{key:"dewPoint",label:"Dew Point"},{key:"relativeHum",label:"Relative Humidity"},{key:"stnLevelPress",label:"Station Level Pressure"},{key:"seaLevelPress",label:"Height of cloud"},{key:"rainFall",label:"Rain Fall"},{key:"presentWx",label:"Present WX"},{key:"pastWx1",label:"Past WX 1"},{key:"pastWx2",label:"Past WX 2"},{key:"nh",label:"Nh"},{key:"cl",label:"Cl"},{key:"cm",label:"Cm"},{key:"ch",label:"Ch"},{key:"tmin",label:"Temperature Min"},{key:"gmin",label:"G Min"},{key:"cldAmtLvl1",label:"Cloud Amt Level 1"},{key:"cldTpLvl1",label:"Cloud Type Level 1"},{key:"cldHtLvl1",label:"Cloud Height Level 1"},{key:"cldAmtLvl2",label:"Cloud Amt Level 2"},{key:"cldTpLvl2",label:"Cloud Type Level 2"},{key:"cldHtLvl2",label:"Cloud Height Level 2"},{key:"cldAmtLvl3",label:"Cloud Amt Level 3"},{key:"cldTpLvl3",label:"Cloud Type Level 3"},{key:"cldHtLvl3",label:"Cloud Height Level 3"},{key:"cldAmtLvl4",label:"Cloud Amt Level 4"},{key:"cldTpLvl4",label:"Cloud Type Level 4"},{key:"cldHtLvl4",label:"Cloud Height Level 4"}];let ft=(()=>{class o{constructor(e,n){this.responsiveSvc=e,this.dataEntryService=n,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"DD/MM/YYYY"},this.hour=6,this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)})}get f(){return this.form.controls}get isEditable(){return!!this.station}get isModified(){return this.monthModified}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id),this.loadDailyData()}onDateSelection(e){if(e){let n=_(e);this.year=n.year(),this.month=n.month()+1}}getHoursValue(e){return _().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.form.reset(),this.initForm()}onCancel(){}onSubmit(e){this.submitted=!0}get groupArray(){return this.form.get("tags")}get formGroups(){return this.groupArray.controls}getTagGroup(e,n,l,c){return new i.cw({key:new i.NI(e),label:new i.NI(n),value:new i.NI(l),flag:new i.NI(c||u.M)})}initForm(){this.form=new i.cw({station:new i.NI(null,i.kI.required),dayMonthYear:new i.NI(new Date,i.kI.required),hour:new i.NI(6,[i.kI.min(0),i.kI.max(24)]),tags:new i.Oe([])});for(let e=0;e<$.length;e++)this.groupArray.push(this.getTagGroup($[e].key,$[e].label,0))}loadDailyData(){}patchForm(e){this.formGroups.forEach((n,l)=>{const c=l+1<10?`0${l+1}`:l+1;n.patchValue(Object.assign({},{day:l+1,value:e[`day${c}`],flag:e[`flag${c}`]}))})}addRecord(){var e;let n={station_id:null===(e=this.station)||void 0===e?void 0:e.station_id,yyyy:this.year,mm:this.month,dd:this.day,hh:this.hour};this.formGroups.forEach((l,c)=>{const f=c+1<10?`0${c+1}`:c+1;n[`day${f}`]=l.controls.value.value,n[`flag${f}`]=l.controls.flag.value,n[`period${f}`]=l.controls.period.value}),n.entry_datetime=(new Date).toISOString(),n.temperature_units=this.f.temperature.value,n.precip_units=this.f.precip.value,n.cloud_height_units=this.f.cloud_height.value,n.vis_units=this.f.visibility.value,console.log(n)}updateRecord(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.k),t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-synoptic2-caribbean"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-2"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","yymmdd"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","yymmdd","type","hidden","formControlName","dayMonthYear","aria-label","default input","cFormControl","","placeholder","Select Date"],["name","dayMonthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange"],["sm","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","hoursValue"],["formControlName","hour","aria-label","Hour","cSelect","",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formArrayName","tags",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],[4,"ngIf"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],[3,"value"],["formArrayName","tags"],["md","12","lg","4"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Carribean Synoptic Data "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,gt,50,21,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,i._Y,i.JL,i.sg,a.iok,a.Yp0,h,a.eFW,i.Fj,a.oHf,i.JJ,i.u,s.mk,a.g8K,a.jOm,C.ar,q.Y5,q.Np,i.EJ,a.nqR,i.YN,i.Kr,s.sg,a.Hq3,w.n,i.CE,tt,a.wxo,a.ORR],pipes:[s.OU],styles:[""]}),o})();function ht(o,r){if(1&o&&(t.TgZ(0,"option",5),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Zt=(()=>{class o{constructor(){this.disabled=!1,this.tabIndex=0,this.value=(new Date).getFullYear(),this.onSelect=new t.vpe,this.years=[]}ngOnInit(){this.formControl=new i.NI(this.value);const e=(new Date).getFullYear();for(let n=e;n>e-50;n--)this.years.push(n);this.subscription=this.formControl.valueChanges.subscribe(n=>{this.onSelect.emit(n)})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-year-selector"]],inputs:{disabled:"disabled",tabIndex:"tabIndex",value:"value"},outputs:{onSelect:"onSelect"},decls:8,vars:3,consts:[["cLabel","","for","element"],[1,"mb-3"],["cSelect","","sizing","md",1,"mb-3",3,"value","formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"label",0),t._uU(2,"Year"),t.qZA(),t.TgZ(3,"c-input-group",1),t.TgZ(4,"select",2),t.TgZ(5,"option",3),t._uU(6,"Select Year"),t.qZA(),t.YNc(7,ht,2,2,"option",4),t.qZA(),t.qZA(),t.BQk()),2&e&&(t.xp6(4),t.Q6J("value",n.value)("formControl",n.formControl),t.xp6(3),t.Q6J("ngForOf",n.years))},directives:[a.eFW,a.g8K,a.nqR,i.EJ,i.JJ,i.oH,i.YN,i.Kr,s.sg],styles:[""]}),o})();var G=m(3044);let yt=(()=>{class o{constructor(){this.modified=!1,this.group=new i.cw({month:new i.NI(""),value:new i.NI(null,i.kI.required),flag:new i.NI(null),priod:new i.NI("")}),this.disabled=!1,this.onDirty=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,E.h)(e=>!this.modified)).subscribe(e=>{console.log(e),this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}selectFlag(e){this.group.controls.flag.setValue(e)}get fg(){return this.group.controls}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-month-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty"},features:[t.TTD],decls:12,vars:4,consts:[[1,"monthly-data-row",3,"formGroup"],["md","5",1,"py-2","label"],["md","2",1,"py-1"],["formControlName","value","aria-label","value","cFormControl",""],["md","2",1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"],["md","3",1,"py-1","text-center"],["type","hidden","formControlName","period","aria-label","flag","cFormControl",""],["formControlName","period","aria-label","period","cFormControl",""]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",4),t._UZ(7,"input",5),t.TgZ(8,"app-flag-picker",6),t.NdJ("onSelect",function(c){return n.selectFlag(c)}),t.qZA(),t.qZA(),t.TgZ(9,"c-col",7),t._UZ(10,"input",8),t._UZ(11,"input",9),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.fg.month.value),t.xp6(5),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[a.iok,i.JL,i.sg,a.Yp0,i.Fj,a.oHf,i.JJ,i.u,Q],styles:[".monthly-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.monthly-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:left}.monthly-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.monthly-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.monthly-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function Ct(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",25),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",27),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function Tt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",28),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onStationSelect(l)}),t.qZA()}}function vt(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",30),t._uU(2," Station selection required."),t.qZA())}function bt(o,r){if(1&o&&(t.TgZ(0,"div",29),t.YNc(1,vt,3,0,"div",15),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function xt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",25),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetElement()}),t.O4$(),t._UZ(5,"svg",27),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.element.element_name)}}function At(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-element-selection",28),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onElementSelect(l)}),t.qZA()}}function Mt(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",30),t._uU(2," Element selection is required."),t.qZA())}function qt(o,r){if(1&o&&(t.TgZ(0,"div",29),t.YNc(1,Mt,3,0,"div",15),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.element.errors.required)}}function Ft(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(),"")}}function wt(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1," Values must be between "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._uU(5," and "),t.TgZ(6,"strong"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,e.element.lower_limit)," "),t.xp6(4),t.hij("",t.lcZ(8,4,e.element.upper_limit)," ")}}function Ot(o,r){1&o&&t._UZ(0,"p")}function Dt(o,r){if(1&o&&(t.TgZ(0,"c-row"),t.TgZ(1,"c-col",31),t.TgZ(2,"div",32),t._UZ(3,"img",33),t.TgZ(4,"h5"),t._uU(5,"Please use the following information for data entry"),t.qZA(),t.YNc(6,wt,9,6,"p",15),t.YNc(7,Ot,1,0,"p",15),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.element.lower_limit&&e.element.upper_limit),t.xp6(1),t.Q6J("ngIf",!e.element.lower_limit||!e.element.upper_limit)}}function St(o,r){1&o&&(t.TgZ(0,"c-row",34),t.TgZ(1,"c-col",35),t.TgZ(2,"c-row",36),t.TgZ(3,"c-col",37),t._uU(4,"Month"),t.qZA(),t.TgZ(5,"c-col",38),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"c-col",38),t._uU(8,"Flag"),t.qZA(),t.TgZ(9,"c-col",39),t._uU(10,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"c-col",40),t.TgZ(12,"c-row",36),t.TgZ(13,"c-col",37),t._uU(14,"Month"),t.qZA(),t.TgZ(15,"c-col",38),t._uU(16,"Value"),t.qZA(),t.TgZ(17,"c-col",38),t._uU(18,"Flag"),t.qZA(),t.TgZ(19,"c-col",39),t._uU(20,"Period"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function Ut(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",42),t.TgZ(1,"app-month-form-group",43),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function It(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",42),t.TgZ(1,"app-month-form-group",43),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Et(o,r){if(1&o&&(t.TgZ(0,"c-row",34),t.TgZ(1,"c-col",35),t.TgZ(2,"c-row"),t.YNc(3,Ut,2,3,"c-col",41),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",35),t.TgZ(6,"c-row"),t.YNc(7,It,2,3,"c-col",41),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,2,e.formMonthGroups,0,6)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,6,e.formMonthGroups,6,12))}}function Pt(o,r){1&o&&(t.TgZ(0,"c-alert",44),t._uU(1,"Please select a date to view form."),t.qZA())}function Nt(o,r){1&o&&t._UZ(0,"c-spinner",45)}const R=function(o){return{"is-invalid":o}};function Jt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(l){return t.CHM(e),t.oxw().onSubmit(l)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,Ct,6,1,"div",9),t.YNc(15,Tt,1,0,"app-station-selection",10),t.YNc(16,bt,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"div",6),t.TgZ(19,"label",12),t._uU(20,"Element"),t.qZA(),t._UZ(21,"input",13),t.YNc(22,xt,6,1,"div",9),t.YNc(23,At,1,0,"app-element-selection",10),t.YNc(24,qt,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(25,"c-col",5),t.TgZ(26,"app-year-selector",14),t.NdJ("onSelect",function(l){return t.CHM(e),t.oxw().yearSelect(l)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"fieldset",4),t.TgZ(28,"legend"),t._uU(29,"Monthly Data "),t.YNc(30,Ft,2,1,"span",15),t.qZA(),t.YNc(31,Dt,8,2,"c-row",15),t.YNc(32,St,21,0,"c-row",16),t.YNc(33,Et,9,10,"c-row",16),t.YNc(34,Pt,2,0,"c-alert",17),t.qZA(),t._UZ(35,"hr",18),t.TgZ(36,"c-row"),t.TgZ(37,"c-col",19),t.TgZ(38,"button",20),t.YNc(39,Nt,1,0,"c-spinner",21),t._uU(40," Submit "),t.qZA(),t.TgZ(41,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(42," Reset "),t.qZA(),t.TgZ(43,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(44," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(16,R,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(18,R,(e.submitted||e.f.element.touched)&&e.f.element.invalid)),t.xp6(1),t.Q6J("ngIf",e.element),t.xp6(1),t.Q6J("ngIf",!e.element),t.xp6(1),t.Q6J("ngIf",e.f.element.errors),t.xp6(2),t.Q6J("value",e.yearValue),t.xp6(4),t.Q6J("ngIf",e.date),t.xp6(1),t.Q6J("ngIf",e.element&&e.formMonthGroups.length),t.xp6(1),t.Q6J("ngIf",e.formMonthGroups.length),t.xp6(1),t.Q6J("ngIf",e.formMonthGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formMonthGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}let kt=(()=>{class o{constructor(e){this.responsiveSvc=e,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.yearValue=(new Date).getFullYear(),this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"YYYY"},this.monthsList=[1,2,3,4,5,6,7,8,9,10,11,12]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)}),this.renderFormMonths(this.yearValue)}get f(){return this.form.controls}get isEditable(){return!!this.station&&!!this.element}get isModified(){return this.monthModified}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id)}resetElement(){this.element=void 0,this.form.controls.element.reset()}onElementSelect(e){this.element=e,this.form.controls.element.setValue(e.element_id)}onSubmit(e){this.submitted=!0;const n=this.form.value;return n.hours=this.formMonthGroups.map(l=>l.value),console.log(n),!0}yearSelect(e){this.renderFormMonths(e)}onReset(){this.form.reset(),this.initForm()}onCancel(){}getDateText(){return _(this.date).format("YYYY")}get monthsArray(){return this.form.get("months")}get formMonthGroups(){return this.monthsArray.controls}getMonthGroup(e){const n=new i.cw({month:new i.NI(null),value:new i.NI(null,[i.kI.min(0),i.kI.max(70)]),flag:new i.NI(null),period:new i.NI(null)});return e&&n.patchValue(e),n}renderFormMonths(e){const l=_(`${e}`).year();this.resetMonths();for(let c=0;c<=this.monthsList.length;c++){const f=_(`${l}-${this.monthsList[c]}`,"YYYY-MM").daysInMonth(),O=_(`${l}-${this.monthsList[c]}`,"YYYY-MM").format("MMMM");this.monthsArray.push(this.getMonthGroup({month:O,value:0,flag:u.M,period:f}))}}resetMonths(){this.form.controls.months=new i.Oe([])}initForm(){this.form=new i.cw({station:new i.NI(null,i.kI.required),element:new i.NI(null,i.kI.required),year:new i.NI((new Date).getFullYear(),i.kI.required),months:new i.Oe([])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-monthly"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-4"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],["id","element","type","hidden","formControlName","element","aria-label","default input","cFormControl","",3,"ngClass"],[3,"value","onSelect"],[4,"ngIf"],["formArrayName","months",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["md","12 mt-3 mb-3"],[1,"form-info"],["src","./assets/img/icons/info.png","alt",""],["formArrayName","months"],["sm","12","md","6","lg","5"],[1,"hourly-header"],["md","5",1,"py-1"],["md","2",1,"py-1"],["md","3",1,"py-1"],["sm","12","md","6","lg","5",1,"d-none","d-lg-block"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group","onDirty"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Monthly data for selected year "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,Jt,45,20,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,i._Y,i.JL,i.sg,a.iok,a.Yp0,h,a.eFW,i.Fj,a.oHf,i.JJ,i.u,s.mk,Zt,a.Hq3,C.ar,w.n,G.Y,i.CE,s.sg,yt,a.wxo,a.ORR],pipes:[s.JJ,s.OU],styles:[""]}),o})(),Yt=(()=>{class o{constructor(){this.modified=!1,this.group=new i.cw({hour:new i.NI(1),ddff:new i.NI(null,i.kI.required),dd:new i.NI(null,i.kI.required),ff:new i.NI(null,i.kI.required),flag:new i.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,E.h)(e=>!this.modified)).subscribe(e=>{console.log(e),this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}get fg(){return this.group.controls}hourVal(e){return e?e&&e<10?`0${e}`:`${e}`:"00"}selectFlag(e){this.group.controls.flag.setValue(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-hourly-wind-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty"},features:[t.TTD],decls:13,vars:4,consts:[[1,"hourly-data-row",3,"formGroup"],[1,"py-2","label"],[1,"py-1"],["formControlName","ddff","aria-label","ddff","cFormControl",""],["formControlName","dd","aria-label","dd","cFormControl",""],["formControlName","ff","aria-label","ff","cFormControl",""],[1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",2),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"c-col",2),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"c-col",6),t._UZ(11,"input",7),t.TgZ(12,"app-flag-picker",8),t.NdJ("onSelect",function(c){return n.selectFlag(c)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.hourVal(n.fg.hour.value)),t.xp6(9),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[a.iok,i.JL,i.sg,a.Yp0,i.Fj,a.oHf,i.JJ,i.u,Q],styles:[".hourly-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.hourly-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center}.hourly-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.hourly-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.hourly-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function Ht(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",29),t.TgZ(1,"div",30),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",32),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function Qt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",33),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onStationSelect(l)}),t.qZA()}}function Lt(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",35),t._uU(2," Station selection required."),t.qZA())}function $t(o,r){if(1&o&&(t.TgZ(0,"div",34),t.YNc(1,Lt,3,0,"div",20),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function Gt(o,r){1&o&&(t.TgZ(0,"div",36),t.O4$(),t._UZ(1,"svg",35),t._uU(2," Year and Month is required "),t.qZA())}function Vt(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(),"")}}function Rt(o,r){1&o&&(t.TgZ(0,"c-row",37),t.TgZ(1,"c-col",38),t.TgZ(2,"c-row",39),t.TgZ(3,"c-col",40),t._uU(4,"Hour"),t.qZA(),t.TgZ(5,"c-col",40),t._uU(6,"DDFF"),t.qZA(),t.TgZ(7,"c-col",40),t._uU(8,"DD"),t.qZA(),t.TgZ(9,"c-col",40),t._uU(10,"FF"),t.qZA(),t.TgZ(11,"c-col",40),t._uU(12,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"c-col",41),t.TgZ(14,"c-row",39),t.TgZ(15,"c-col",40),t._uU(16,"Hour"),t.qZA(),t.TgZ(17,"c-col",40),t._uU(18,"DDFF"),t.qZA(),t.TgZ(19,"c-col",40),t._uU(20,"DD"),t.qZA(),t.TgZ(21,"c-col",40),t._uU(22,"FF"),t.qZA(),t.TgZ(23,"c-col",40),t._uU(24,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"c-col",42),t.TgZ(26,"c-row",39),t.TgZ(27,"c-col",40),t._uU(28,"Hour"),t.qZA(),t.TgZ(29,"c-col",40),t._uU(30,"DDFF"),t.qZA(),t.TgZ(31,"c-col",40),t._uU(32,"DD"),t.qZA(),t.TgZ(33,"c-col",40),t._uU(34,"FF"),t.qZA(),t.TgZ(35,"c-col",40),t._uU(36,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function Wt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",44),t.TgZ(1,"app-hourly-wind-form-group",45),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Kt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",44),t.TgZ(1,"app-hourly-wind-form-group",45),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Bt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",44),t.TgZ(1,"app-hourly-wind-form-group",45),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function jt(o,r){if(1&o&&(t.TgZ(0,"c-row",37),t.TgZ(1,"c-col",38),t.TgZ(2,"c-row"),t.YNc(3,Wt,2,3,"c-col",43),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",38),t.TgZ(6,"c-row"),t.YNc(7,Kt,2,3,"c-col",43),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.TgZ(9,"c-col",38),t.TgZ(10,"c-row"),t.YNc(11,Bt,2,3,"c-col",43),t.ALo(12,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,3,e.formHoursGroups,0,8)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,7,e.formHoursGroups,8,16)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(12,11,e.formHoursGroups,16,24))}}function zt(o,r){1&o&&(t.TgZ(0,"c-alert",46),t._uU(1,"Please select a date to view form."),t.qZA())}function Xt(o,r){1&o&&t._UZ(0,"c-spinner",47)}const W=function(o){return{"is-invalid":o}};function te(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(l){return t.CHM(e),t.oxw().onSubmit(l)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,Ht,6,1,"div",9),t.YNc(15,Qt,1,0,"app-station-selection",10),t.YNc(16,$t,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"label",12),t._uU(19,"Day/Month/Year"),t.qZA(),t.TgZ(20,"c-input-group",13),t.TgZ(21,"span",14),t.O4$(),t._UZ(22,"svg",15),t.qZA(),t.kcU(),t._UZ(23,"input",16),t.TgZ(24,"input",17),t.NdJ("bsValueChange",function(l){return t.CHM(e),t.oxw().onDateSelection(l)})("onShown",function(l){return t.CHM(e),t.oxw().onOpenCalendar(l)}),t.qZA(),t.YNc(25,Gt,3,0,"div",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"fieldset",19),t.TgZ(27,"legend"),t._uU(28,"Hourly Data "),t.YNc(29,Vt,2,1,"span",20),t.qZA(),t.YNc(30,Rt,37,0,"c-row",21),t.YNc(31,jt,13,15,"c-row",21),t.YNc(32,zt,2,0,"c-alert",22),t.qZA(),t._UZ(33,"hr",23),t.TgZ(34,"c-row"),t.TgZ(35,"c-col",24),t.TgZ(36,"button",25),t.YNc(37,Xt,1,0,"c-spinner",26),t._uU(38," Submit "),t.qZA(),t.TgZ(39,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(40," Reset "),t.qZA(),t.TgZ(41,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(42," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(14,W,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(16,W,e.submitted&&e.f.monthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.monthYear.invalid),t.xp6(4),t.Q6J("ngIf",e.date),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formHoursGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}let ee=(()=>{class o{constructor(e){this.responsiveSvc=e,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"DD/MM/YYYY"},this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)})}get f(){return this.form.controls}get isEditable(){return!!this.station}get isModified(){return this.monthModified}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id)}onSubmit(e){this.submitted=!0;const n=this.form.value;return n.hours=this.formHoursGroups.map(l=>l.value),console.log(n),!0}onDateSelection(e){e&&this.renderFormHours(e)}getHoursValue(e){return _().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.form.reset(),this.initForm()}onCancel(){}onOpenCalendar(e){e.monthSelectHandler=n=>{e._store.dispatch(e._actions.select(n.date))}}getDateText(){return _(this.date).format("DD MMM YYYYY")}get hoursArray(){return this.form.get("hours")}get formHoursGroups(){return this.hoursArray.controls}getHourGroup(e){const n=new i.cw({hour:new i.NI(null),ddff:new i.NI(null),dd:new i.NI(null),ff:new i.NI(null),flag:new i.NI(null)});return e&&n.patchValue(e),n}renderFormHours(e){this.resetHours();for(let n=0;n<=this.hoursList.length;n++)this.hoursArray.push(this.getHourGroup({hour:n,ddff:0,dd:0,ff:0,flag:u.M}))}resetHours(){this.form.controls.hours=new i.Oe([])}initForm(){this.form=new i.cw({station:new i.NI(null,i.kI.required),date:new i.NI(new Date,i.kI.required),hours:new i.Oe([]),total:new i.NI(null)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-hourly-wind"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-4"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","element","type","hidden","formControlName","date","aria-label","default input","cFormControl","","placeholder","Station Name"],["name","monthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange","onShown"],["sm","12","class","invalid-feedback",4,"ngIf"],[1,"form-group","p-3","mt-2"],[4,"ngIf"],["formArrayName","hours",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],["formArrayName","hours"],["sm","12","md","6","lg","4","xl","3"],[1,"hourly-header"],[1,"py-1"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-md-block"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-lg-block"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group","onDirty"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Hourly Wind data for selected date "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,te,43,18,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,i._Y,i.JL,i.sg,a.iok,a.Yp0,h,a.eFW,i.Fj,a.oHf,i.JJ,i.u,s.mk,a.g8K,a.jOm,C.ar,q.Y5,q.Np,a.Hq3,w.n,i.CE,s.sg,Yt,a.wxo,a.ORR],pipes:[s.OU],styles:[".hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;padding-left:.3rem}.hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]:first-child{padding-left:2%}.form-info[_ngcontent-%COMP%]{position:relative;padding:1rem .8rem .2rem 5rem;background-color:#d6ebff;border:1px solid #c2e0ff;border-radius:.25rem;color:#333}.form-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:1rem;left:.8rem;width:4rem}.form-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.form-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-top:.5rem}"]}),o})(),oe=(()=>{class o{constructor(){this.modified=!1,this.group=new i.cw({hour:new i.NI(1),value:new i.NI(null,i.kI.required),flag:new i.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,E.h)(e=>!this.modified)).subscribe(e=>{console.log(e),this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}get fg(){return this.group.controls}hourVal(e){return e?e&&e<10?`0${e}`:`${e}`:"00"}selectFlag(e){this.group.controls.flag.setValue(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-hourly-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty"},features:[t.TTD],decls:9,vars:4,consts:[[1,"hourly-data-row",3,"formGroup"],[1,"py-2","label"],[1,"py-1"],["formControlName","value","aria-label","value","cFormControl",""],[1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"c-col",2),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"c-col",4),t._UZ(7,"input",5),t.TgZ(8,"app-flag-picker",6),t.NdJ("onSelect",function(c){return n.selectFlag(c)}),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.group),t.xp6(3),t.Oqu(n.hourVal(n.fg.hour.value)),t.xp6(5),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[a.iok,i.JL,i.sg,a.Yp0,i.Fj,a.oHf,i.JJ,i.u,Q],styles:[".hourly-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.hourly-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center}.hourly-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.hourly-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.hourly-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}"]}),o})();function ne(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",30),t.TgZ(1,"div",31),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",33),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function ie(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",34),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onStationSelect(l)}),t.qZA()}}function re(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",36),t._uU(2," Station selection required."),t.qZA())}function le(o,r){if(1&o&&(t.TgZ(0,"div",35),t.YNc(1,re,3,0,"div",21),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function ae(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",30),t.TgZ(1,"div",31),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetElement()}),t.O4$(),t._UZ(5,"svg",33),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.element.element_name)}}function ce(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-element-selection",34),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onElementSelect(l)}),t.qZA()}}function se(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",36),t._uU(2," Element selection is required."),t.qZA())}function me(o,r){if(1&o&&(t.TgZ(0,"div",35),t.YNc(1,se,3,0,"div",21),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.element.errors.required)}}function _e(o,r){1&o&&(t.TgZ(0,"div",37),t.O4$(),t._UZ(1,"svg",36),t._uU(2," Year and Month is required "),t.qZA())}function pe(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(),"")}}function ue(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1," Values must be between "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._uU(5," and "),t.TgZ(6,"strong"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,e.element.lower_limit)," "),t.xp6(4),t.hij("",t.lcZ(8,4,e.element.upper_limit)," ")}}function de(o,r){1&o&&t._UZ(0,"p")}function ge(o,r){if(1&o&&(t.TgZ(0,"c-row"),t.TgZ(1,"c-col",38),t.TgZ(2,"div",39),t._UZ(3,"img",40),t.TgZ(4,"h5"),t._uU(5,"Please use the following information for data entry"),t.qZA(),t.YNc(6,ue,9,6,"p",21),t.YNc(7,de,1,0,"p",21),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.element.lower_limit&&e.element.upper_limit),t.xp6(1),t.Q6J("ngIf",!e.element.lower_limit||!e.element.upper_limit)}}function fe(o,r){1&o&&(t.TgZ(0,"c-row",41),t.TgZ(1,"c-col",42),t.TgZ(2,"c-row",43),t.TgZ(3,"c-col",44),t._uU(4,"Hour"),t.qZA(),t.TgZ(5,"c-col",44),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"c-col",44),t._uU(8,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"c-col",45),t.TgZ(10,"c-row",43),t.TgZ(11,"c-col",44),t._uU(12,"Hour"),t.qZA(),t.TgZ(13,"c-col",44),t._uU(14,"Value"),t.qZA(),t.TgZ(15,"c-col",44),t._uU(16,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"c-col",46),t.TgZ(18,"c-row",43),t.TgZ(19,"c-col",44),t._uU(20,"Hour"),t.qZA(),t.TgZ(21,"c-col",44),t._uU(22,"Value"),t.qZA(),t.TgZ(23,"c-col",44),t._uU(24,"Flag"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function he(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",48),t.TgZ(1,"app-hourly-form-group",49),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Ze(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",48),t.TgZ(1,"app-hourly-form-group",49),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function ye(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",48),t.TgZ(1,"app-hourly-form-group",49),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Ce(o,r){if(1&o&&(t.TgZ(0,"c-row",41),t.TgZ(1,"c-col",42),t.TgZ(2,"c-row"),t.YNc(3,he,2,3,"c-col",47),t.ALo(4,"slice"),t.qZA(),t.qZA(),t.TgZ(5,"c-col",42),t.TgZ(6,"c-row"),t.YNc(7,Ze,2,3,"c-col",47),t.ALo(8,"slice"),t.qZA(),t.qZA(),t.TgZ(9,"c-col",42),t.TgZ(10,"c-row"),t.YNc(11,ye,2,3,"c-col",47),t.ALo(12,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",t.Dn7(4,3,e.formHoursGroups,0,8)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(8,7,e.formHoursGroups,8,16)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(12,11,e.formHoursGroups,16,24))}}function Te(o,r){1&o&&(t.TgZ(0,"c-alert",50),t._uU(1,"Please select a date to view form."),t.qZA())}function ve(o,r){1&o&&t._UZ(0,"c-spinner",51)}const V=function(o){return{"is-invalid":o}};function be(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(l){return t.CHM(e),t.oxw().onSubmit(l)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.TgZ(4,"c-col",3),t.TgZ(5,"fieldset",4),t.TgZ(6,"legend"),t._uU(7,"Form Selector"),t.qZA(),t.TgZ(8,"c-row"),t.TgZ(9,"c-col",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t._uU(12,"Station"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,ne,6,1,"div",9),t.YNc(15,ie,1,0,"app-station-selection",10),t.YNc(16,le,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(17,"c-col",5),t.TgZ(18,"div",6),t.TgZ(19,"label",12),t._uU(20,"Element"),t.qZA(),t._UZ(21,"input",13),t.YNc(22,ae,6,1,"div",9),t.YNc(23,ce,1,0,"app-element-selection",10),t.YNc(24,me,2,1,"div",11),t.qZA(),t.qZA(),t.TgZ(25,"c-col",5),t.TgZ(26,"label",12),t._uU(27,"Day/Month/Year"),t.qZA(),t.TgZ(28,"c-input-group",14),t.TgZ(29,"span",15),t.O4$(),t._UZ(30,"svg",16),t.qZA(),t.kcU(),t._UZ(31,"input",17),t.TgZ(32,"input",18),t.NdJ("bsValueChange",function(l){return t.CHM(e),t.oxw().onDateSelection(l)})("onShown",function(l){return t.CHM(e),t.oxw().onOpenCalendar(l)}),t.qZA(),t.YNc(33,_e,3,0,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"fieldset",20),t.TgZ(35,"legend"),t._uU(36,"Hourly Data "),t.YNc(37,pe,2,1,"span",21),t.qZA(),t.YNc(38,ge,8,2,"c-row",21),t.YNc(39,fe,25,0,"c-row",22),t.YNc(40,Ce,13,15,"c-row",22),t.YNc(41,Te,2,0,"c-alert",23),t.qZA(),t._UZ(42,"hr",24),t.TgZ(43,"c-row"),t.TgZ(44,"c-col",25),t.TgZ(45,"button",26),t.YNc(46,ve,1,0,"c-spinner",27),t._uU(47," Submit "),t.qZA(),t.TgZ(48,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(49," Reset "),t.qZA(),t.TgZ(50,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(51," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(13),t.Q6J("ngClass",t.VKq(19,V,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(21,V,(e.submitted||e.f.element.touched)&&e.f.element.invalid)),t.xp6(1),t.Q6J("ngIf",e.element),t.xp6(1),t.Q6J("ngIf",!e.element),t.xp6(1),t.Q6J("ngIf",e.f.element.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(23,V,e.submitted&&e.f.monthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.monthYear.invalid),t.xp6(4),t.Q6J("ngIf",e.date),t.xp6(1),t.Q6J("ngIf",e.element&&e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",e.formHoursGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formHoursGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading)}}let xe=(()=>{class o{constructor(e){this.responsiveSvc=e,this.submitted=!1,this.loading=!1,this.error="",this.monthModified=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"DD/MM/YYYY"},this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)})}get f(){return this.form.controls}get isEditable(){return!!this.station&&!!this.element}get isModified(){return this.monthModified}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id)}resetElement(){this.element=void 0,this.form.controls.element.reset()}onElementSelect(e){this.element=e,this.form.controls.element.setValue(e.element_id)}onSubmit(e){this.submitted=!0;const n=this.form.value;return n.hours=this.formHoursGroups.map(l=>l.value),console.log(n),!0}onDateSelection(e){e&&this.renderFormHours(e)}getHoursValue(e){return _().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.form.reset(),this.initForm()}onCancel(){}onOpenCalendar(e){e.monthSelectHandler=n=>{e._store.dispatch(e._actions.select(n.date))},e.setViewMode("month")}getDateText(){return _(this.date).format("DD MMM YYYYY")}get hoursArray(){return this.form.get("hours")}get formHoursGroups(){return this.hoursArray.controls}getHourGroup(e){const n=new i.cw({hour:new i.NI(null),value:new i.NI(null,[i.kI.min(0),i.kI.max(70)]),flag:new i.NI(null)});return e&&n.patchValue(e),n}renderFormHours(e){this.resetHours();for(let n=0;n<=this.hoursList.length;n++)this.hoursArray.push(this.getHourGroup({hour:n,value:0,flag:u.M}))}resetHours(){this.form.controls.days=new i.Oe([])}initForm(){this.form=new i.cw({station:new i.NI(null,i.kI.required),element:new i.NI(null,i.kI.required),date:new i.NI(new Date,i.kI.required),hours:new i.Oe([]),total:new i.NI(null)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-hourly"]],decls:4,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12"],[1,"form-group","p-3","mt-4"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],["id","element","type","hidden","formControlName","element","aria-label","default input","cFormControl","",3,"ngClass"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","element","type","hidden","formControlName","date","aria-label","default input","cFormControl","","placeholder","Station Name"],["name","monthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange","onShown"],["sm","12","class","invalid-feedback",4,"ngIf"],[1,"form-group","p-3","mt-2"],[4,"ngIf"],["formArrayName","hours",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],["md","12 mt-3 mb-3"],[1,"form-info"],["src","./assets/img/icons/info.png","alt",""],["formArrayName","hours"],["sm","12","md","6","lg","4","xl","3"],[1,"hourly-header"],[1,"py-1"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-md-block"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-lg-block"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group","onDirty"],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1," Hourly data for selected date "),t.qZA(),t._UZ(2,"hr"),t.YNc(3,be,52,25,"form",0)),2&e&&(t.xp6(3),t.Q6J("ngIf",n.form))},directives:[s.O5,i._Y,i.JL,i.sg,a.iok,a.Yp0,h,a.eFW,i.Fj,a.oHf,i.JJ,i.u,s.mk,a.g8K,a.jOm,C.ar,q.Y5,q.Np,a.Hq3,w.n,G.Y,i.CE,s.sg,oe,a.wxo,a.ORR],pipes:[s.JJ,s.OU],styles:[".hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;padding-left:.3rem}.hourly-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]:first-child{padding-left:2%}.form-info[_ngcontent-%COMP%]{position:relative;padding:1rem .8rem .2rem 5rem;background-color:#d6ebff;border:1px solid #c2e0ff;border-radius:.25rem;color:#333}.form-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:1rem;left:.8rem;width:4rem}.form-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.form-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-top:.5rem}"]}),o})();var K=m(703),B=m(8505),Ae=m(5698),Me=m(3900),P=(()=>{return(o=P||(P={})).Celsius="Degree Celcius",o.DegreeF="Degree Fahrenheit",P;var o})(),N=(()=>{return(o=N||(N={})).mm="Millimeters",o.cm="Centimeters",o.in="Inches",N;var o})(),J=(()=>{return(o=J||(J={})).Foot="Feet",o.Metre="Metre",o.Kilometres="Kilometres",J;var o})(),k=(()=>{return(o=k||(k={})).Metres="Metres",o.Kilometres="Kilometres",o.StatuteMiles="Statute Miles",k;var o})();const De={temperature:[{key:"DEGREE CELSIUS",value:P.Celsius,symbol:"\xb0C"},{key:"DEGREE CELCIUS",value:P.Celsius,symbol:"\xb0C"},{key:"DEGREE FAHRENHEIT",value:P.DegreeF,symbol:"\xb0F"}],precipitation:[{key:"MILIMETER",value:N.mm,symbol:"mm"},{key:"CENTIMETER",value:N.cm,symbol:"mm"},{key:"INCHE",value:N.in,symbol:"in"}],cloudHeight:[{key:"FEET",value:J.Foot,symbol:"ft"},{key:"METRE",value:J.Metre,symbol:"M"},{key:"KILOMETERS",value:J.Kilometres,symbol:"M"}],visibility:[{key:"METRES",value:k.Metres,symbol:"M"},{key:"KILOMETRES",value:k.Kilometres,symbol:"Km"},{key:"STATUTE MILES",value:k.StatuteMiles,symbol:"M"}]};var Se=m(1134),Ue=m(7160),Ie=m(9309),Ee=m(4127),Pe=m(9646),Ne=m(1005);function Je(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.fg.day.value)}}function ke(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().revert()}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.fg.day.value)}}const Ye=function(o){return{"is-dirty":o}};let He=(()=>{class o{constructor(){this.modified=!1,this.group=new i.cw({day:new i.NI(1),value:new i.NI(null,i.kI.required),flag:new i.NI(null),period:new i.NI(null)}),this.disabled=!1,this.onDirty=new t.vpe,this.onRevert=new t.vpe}ngOnInit(){this.group.valueChanges.pipe((0,E.h)(e=>!this.modified)).subscribe(e=>{this.onDirty.emit(!0)})}ngOnChanges(e){this.disabled?this.group.disable():this.group.enable()}ngAfterViewInit(){(0,Pe.of)(!0).pipe((0,Ne.g)(500)).subscribe(()=>{this.pristine=this.group.value})}selectFlag(e){this.fg.flag.value!==e&&(this.fg.flag.setValue(e),this.fg.flag.markAsDirty())}get fg(){return this.group.controls}get isDirty(){return this.fg.value.dirty||this.fg.flag.dirty||this.fg.period.dirty}revert(){this.onRevert.emit(+this.fg.day.value)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-daily-day-form-group"]],inputs:{modified:"modified",group:"group",disabled:"disabled"},outputs:{onDirty:"onDirty",onRevert:"onRevert"},features:[t.TTD],decls:11,vars:8,consts:[[1,"daily-data-row",3,"ngClass","formGroup"],[1,"py-2","label"],[4,"ngIf"],["type","button","cButton","","color","dark","shape","rounded-pill",3,"click",4,"ngIf"],[1,"py-1"],["formControlName","value","aria-label","value","cFormControl",""],[1,"py-1","text-center"],["type","hidden","formControlName","flag","aria-label","flag","cFormControl",""],[3,"flag","disabled","onSelect"],["formControlName","period","aria-label","period","cFormControl",""],["type","button","cButton","","color","dark","shape","rounded-pill",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row",0),t.TgZ(1,"c-col",1),t.YNc(2,Je,2,1,"span",2),t.YNc(3,ke,2,1,"button",3),t.qZA(),t.TgZ(4,"c-col",4),t._UZ(5,"input",5),t.qZA(),t.TgZ(6,"c-col",6),t._UZ(7,"input",7),t.TgZ(8,"app-flag-picker",8),t.NdJ("onSelect",function(c){return n.selectFlag(c)}),t.qZA(),t.qZA(),t.TgZ(9,"c-col",4),t._UZ(10,"input",9),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngClass",t.VKq(6,Ye,n.isDirty))("formGroup",n.group),t.xp6(2),t.Q6J("ngIf",!n.isDirty),t.xp6(1),t.Q6J("ngIf",n.isDirty),t.xp6(5),t.Q6J("flag",n.fg.flag.value)("disabled",n.disabled))},directives:[a.iok,s.mk,i.JL,i.sg,a.Yp0,s.O5,i.Fj,a.oHf,i.JJ,i.u,Q,a.Hq3],styles:[".daily-data-row[_ngcontent-%COMP%]{padding:.1rem .3rem;margin:.2rem 0;background-color:#e5ecf2;border:1px solid #cdd4da;border-radius:.2rem}.daily-data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center}.daily-data-row[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{padding:0 .2rem}.daily-data-row.has-error[_ngcontent-%COMP%]{background-color:#ffe2e2;border:1px solid #dd6868}.daily-data-row.is-dirty[_ngcontent-%COMP%]{background-color:#a3e8fd;border:1px solid #8cc9db}.daily-data-row[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.daily-data-row[_ngcontent-%COMP%]   .btn.rounded-pill[_ngcontent-%COMP%]{padding:.1rem .4rem;font-size:.9rem}"]}),o})();const Qe=["dailyGroup"];function Le(o,r){1&o&&(t.TgZ(0,"c-col",2),t._UZ(1,"app-infinite-loading"),t.qZA())}function $e(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",43),t.TgZ(1,"div",44),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",45),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetStation()}),t.O4$(),t._UZ(5,"svg",46),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.station.station_name)}}function Ge(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-station-selection",47),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onStationSelect(l)}),t.qZA()}}function Ve(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Station selection required."),t.qZA())}function Re(o,r){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,Ve,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.station.errors.required)}}function We(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",43),t.TgZ(1,"div",44),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"a",45),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).resetElement()}),t.O4$(),t._UZ(5,"svg",46),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.element.element_name)}}function Ke(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-element-selection",47),t.NdJ("onSelection",function(l){return t.CHM(e),t.oxw(2).onElementSelect(l)}),t.qZA()}}function Be(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Element selection is required."),t.qZA())}function je(o,r){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,Be,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.element.errors.required)}}function ze(o,r){1&o&&(t.TgZ(0,"div",50),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Year and Month is required "),t.qZA())}function Xe(o,r){if(1&o&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.Oqu(n.getHoursValue(e))}}function to(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Hour selection is required."),t.qZA())}function eo(o,r){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,to,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.dayHour.errors.required)}}function oo(o,r){if(1&o&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function no(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Selection is required."),t.qZA())}function io(o,r){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,no,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.temperature.errors.required)}}function ro(o,r){if(1&o&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function lo(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Selection is required."),t.qZA())}function ao(o,r){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,lo,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.precip.errors.required)}}function co(o,r){if(1&o&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function so(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Selection is required."),t.qZA())}function mo(o,r){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,so,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.cloud_height.errors.required)}}function _o(o,r){if(1&o&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function po(o,r){1&o&&(t.TgZ(0,"div"),t.O4$(),t._UZ(1,"svg",49),t._uU(2," Selection is required."),t.qZA())}function uo(o,r){if(1&o&&(t.TgZ(0,"div",48),t.YNc(1,po,3,0,"div",34),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.visibility.errors.required)}}function go(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("for ",e.getDateText(e.year,e.month),"")}}function fo(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p"),t._uU(1," Values must be between "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._uU(5," and "),t.TgZ(6,"strong"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"a",55),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreInfo()}),t._uU(10," more... "),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,e.element.lower_limit)," "),t.xp6(4),t.hij("",t.lcZ(8,4,e.element.upper_limit)," ")}}function ho(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p"),t._uU(1," No validation information available for the selected element. "),t.TgZ(2,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreInfo()}),t._uU(3," more... "),t.qZA(),t.qZA()}}function Zo(o,r){if(1&o&&(t.TgZ(0,"c-row"),t.TgZ(1,"c-col",52),t.TgZ(2,"div",53),t._UZ(3,"img",54),t.TgZ(4,"h5"),t._uU(5,"Please use the following information for data entry"),t.qZA(),t.YNc(6,fo,11,6,"p",34),t.YNc(7,ho,4,0,"p",34),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.element.lower_limit&&e.element.upper_limit),t.xp6(1),t.Q6J("ngIf",!e.element.lower_limit||!e.element.upper_limit)}}function yo(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",65),t.TgZ(1,"app-daily-day-form-group",66,67),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)})("onRevert",function(l){return t.CHM(e),t.oxw(3).revertDay(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function Co(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",65),t.TgZ(1,"app-daily-day-form-group",66,67),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)})("onRevert",function(l){return t.CHM(e),t.oxw(3).revertDay(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function To(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",65),t.TgZ(1,"app-daily-day-form-group",66,67),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)})("onRevert",function(l){return t.CHM(e),t.oxw(3).revertDay(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function vo(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"c-col",65),t.TgZ(1,"app-daily-day-form-group",66,67),t.NdJ("onDirty",function(l){return t.CHM(e),t.oxw(3).onFormModified(l)})("onRevert",function(l){return t.CHM(e),t.oxw(3).revertDay(l)}),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("disabled",!n.isEditable)("modified",n.isModified)("group",e)}}function bo(o,r){if(1&o&&(t.TgZ(0,"c-row",57),t.TgZ(1,"c-col",58),t.TgZ(2,"c-row",59),t.TgZ(3,"c-col",60),t._uU(4,"Day"),t.qZA(),t.TgZ(5,"c-col",60),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"c-col",60),t._uU(8,"Flag"),t.qZA(),t.TgZ(9,"c-col",60),t._uU(10,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"c-col",61),t.TgZ(12,"c-row",59),t.TgZ(13,"c-col",60),t._uU(14,"Day"),t.qZA(),t.TgZ(15,"c-col",60),t._uU(16,"Value"),t.qZA(),t.TgZ(17,"c-col",60),t._uU(18,"Flag"),t.qZA(),t.TgZ(19,"c-col",60),t._uU(20,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"c-col",62),t.TgZ(22,"c-row",59),t.TgZ(23,"c-col",60),t._uU(24,"Day"),t.qZA(),t.TgZ(25,"c-col",60),t._uU(26,"Value"),t.qZA(),t.TgZ(27,"c-col",60),t._uU(28,"Flag"),t.qZA(),t.TgZ(29,"c-col",60),t._uU(30,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"c-col",63),t.TgZ(32,"c-row",59),t.TgZ(33,"c-col",60),t._uU(34,"Day"),t.qZA(),t.TgZ(35,"c-col",60),t._uU(36,"Value"),t.qZA(),t.TgZ(37,"c-col",60),t._uU(38,"Flag"),t.qZA(),t.TgZ(39,"c-col",60),t._uU(40,"Period"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"c-col",58),t.TgZ(42,"c-row"),t.YNc(43,yo,3,3,"c-col",64),t.ALo(44,"slice"),t.qZA(),t.qZA(),t.TgZ(45,"c-col",58),t.TgZ(46,"c-row"),t.YNc(47,Co,3,3,"c-col",64),t.ALo(48,"slice"),t.qZA(),t.qZA(),t.TgZ(49,"c-col",58),t.TgZ(50,"c-row"),t.YNc(51,To,3,3,"c-col",64),t.ALo(52,"slice"),t.qZA(),t.qZA(),t.TgZ(53,"c-col",58),t.TgZ(54,"c-row"),t.YNc(55,vo,3,3,"c-col",64),t.ALo(56,"slice"),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(43),t.Q6J("ngForOf",t.Dn7(44,4,e.formDaysGroups,0,8)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(48,8,e.formDaysGroups,8,16)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(52,12,e.formDaysGroups,16,24)),t.xp6(4),t.Q6J("ngForOf",t.Dn7(56,16,e.formDaysGroups,24,31))}}function xo(o,r){1&o&&(t.TgZ(0,"c-alert",68),t._uU(1,"Please select a date to view form."),t.qZA())}function Ao(o,r){1&o&&t._UZ(0,"c-spinner",69)}const U=function(o){return{"is-invalid":o}};function Mo(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(l){return t.CHM(e),t.oxw().onSubmit(l)}),t.TgZ(1,"c-row"),t.TgZ(2,"c-col",2),t._UZ(3,"app-flag-legend"),t.qZA(),t.YNc(4,Le,2,0,"c-col",3),t.TgZ(5,"c-col",4),t.TgZ(6,"fieldset",5),t.TgZ(7,"legend"),t._uU(8,"Form Selector"),t.qZA(),t.TgZ(9,"c-row"),t.TgZ(10,"c-col",6),t.TgZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13,"Station"),t.qZA(),t._UZ(14,"input",9),t.YNc(15,$e,6,1,"div",10),t.YNc(16,Ge,1,0,"app-station-selection",11),t.YNc(17,Re,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(18,"c-col",6),t.TgZ(19,"div",7),t.TgZ(20,"label",13),t._uU(21,"Element"),t.qZA(),t._UZ(22,"input",14),t.YNc(23,We,6,1,"div",10),t.YNc(24,Ke,1,0,"app-element-selection",11),t.YNc(25,je,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(26,"c-col",6),t.TgZ(27,"label",13),t._uU(28,"Month/Year"),t.qZA(),t.TgZ(29,"c-input-group",15),t.TgZ(30,"span",16),t.O4$(),t._UZ(31,"svg",17),t.qZA(),t.kcU(),t._UZ(32,"input",18),t.TgZ(33,"input",19),t.NdJ("bsValueChange",function(l){return t.CHM(e),t.oxw().onDateSelection(l)})("onShown",function(l){return t.CHM(e),t.oxw().onOpenCalendar(l)}),t.qZA(),t.YNc(34,ze,3,0,"div",20),t.qZA(),t.qZA(),t.TgZ(35,"c-col",6),t.TgZ(36,"div",7),t.TgZ(37,"label",21),t._uU(38,"Hour"),t.qZA(),t.TgZ(39,"select",22),t.NdJ("change",function(l){return t.CHM(e),t.oxw().onHourSelect(l.target)}),t.TgZ(40,"option",23),t._uU(41,"Select Hour"),t.qZA(),t.YNc(42,Xe,2,2,"option",24),t.qZA(),t.YNc(43,eo,2,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"fieldset",25),t.TgZ(45,"legend"),t._uU(46,"Units"),t.qZA(),t.TgZ(47,"c-row"),t.TgZ(48,"c-col",26),t.TgZ(49,"div",7),t.TgZ(50,"label",21),t._uU(51,"Temperature"),t.qZA(),t.TgZ(52,"select",27),t.TgZ(53,"option",23),t._uU(54,"Please Select"),t.qZA(),t.YNc(55,oo,2,2,"option",24),t.qZA(),t.YNc(56,io,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(57,"c-col",26),t.TgZ(58,"div",7),t.TgZ(59,"label",28),t._uU(60,"Precipitation"),t.qZA(),t.TgZ(61,"select",29),t.TgZ(62,"option",23),t._uU(63,"Please Select"),t.qZA(),t.YNc(64,ro,2,2,"option",24),t.qZA(),t.YNc(65,ao,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(66,"c-col",26),t.TgZ(67,"div",7),t.TgZ(68,"label",30),t._uU(69,"Cloud Height"),t.qZA(),t.TgZ(70,"select",31),t.TgZ(71,"option",23),t._uU(72,"Please Select"),t.qZA(),t.YNc(73,co,2,2,"option",24),t.qZA(),t.YNc(74,mo,2,1,"div",12),t.qZA(),t.qZA(),t.TgZ(75,"c-col",26),t.TgZ(76,"div",7),t.TgZ(77,"label",32),t._uU(78,"Visibility"),t.qZA(),t.TgZ(79,"select",33),t.TgZ(80,"option",23),t._uU(81,"Please Select"),t.qZA(),t.YNc(82,_o,2,2,"option",24),t.qZA(),t.YNc(83,uo,2,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"fieldset",5),t.TgZ(85,"legend"),t._uU(86,"Daily Data "),t.YNc(87,go,2,1,"span",34),t.qZA(),t.YNc(88,Zo,8,2,"c-row",34),t.YNc(89,bo,57,20,"c-row",35),t.YNc(90,xo,2,0,"c-alert",36),t.qZA(),t._UZ(91,"hr",37),t.TgZ(92,"c-row"),t.TgZ(93,"c-col",38),t.TgZ(94,"button",39),t.YNc(95,Ao,1,0,"c-spinner",40),t._uU(96),t.qZA(),t.TgZ(97,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(98," Reset "),t.qZA(),t.TgZ(99,"button",42),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(100," Cancel "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(4),t.Q6J("ngIf",e.loading),t.xp6(10),t.Q6J("ngClass",t.VKq(35,U,(e.submitted||e.f.station.touched)&&e.f.station.invalid)),t.xp6(1),t.Q6J("ngIf",e.station),t.xp6(1),t.Q6J("ngIf",!e.station),t.xp6(1),t.Q6J("ngIf",e.f.station.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(37,U,(e.submitted||e.f.element.touched)&&e.f.element.invalid)),t.xp6(1),t.Q6J("ngIf",e.element),t.xp6(1),t.Q6J("ngIf",!e.element),t.xp6(1),t.Q6J("ngIf",e.f.element.errors),t.xp6(8),t.Q6J("bsConfig",e.bsConfig)("bsValue",e.monthYearValue)("ngClass",t.VKq(39,U,e.submitted&&e.f.monthYear.invalid)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.monthYear.invalid),t.xp6(5),t.Q6J("ngClass",t.VKq(41,U,(e.submitted||e.f.dayHour.touched)&&e.f.dayHour.invalid)),t.xp6(3),t.Q6J("ngForOf",e.hoursList),t.xp6(1),t.Q6J("ngIf",e.f.dayHour.errors),t.xp6(9),t.Q6J("ngClass",t.VKq(43,U,(e.submitted||e.f.temperature.touched)&&e.f.temperature.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.temperature),t.xp6(1),t.Q6J("ngIf",e.f.temperature.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(45,U,(e.submitted||e.f.precip.touched)&&e.f.precip.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.precipitation),t.xp6(1),t.Q6J("ngIf",e.f.precip.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(47,U,(e.submitted||e.f.cloud_height.touched)&&e.f.cloud_height.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.cloudHeight),t.xp6(1),t.Q6J("ngIf",e.f.cloud_height.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(49,U,(e.submitted||e.f.visibility.touched)&&e.f.visibility.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitOptions.visibility),t.xp6(1),t.Q6J("ngIf",e.f.visibility.errors),t.xp6(4),t.Q6J("ngIf",e.year&&e.month),t.xp6(1),t.Q6J("ngIf",e.element&&e.formDaysGroups.length),t.xp6(1),t.Q6J("ngIf",e.formDaysGroups.length),t.xp6(1),t.Q6J("ngIf",!e.formDaysGroups.length),t.xp6(5),t.Q6J("ngIf",e.loading),t.xp6(1),t.hij(" ",e.hasRecord?"Update":"Save"," ")}}let qo=(()=>{class o{constructor(e,n,l,c,f,O){this.router=e,this.modalService=n,this.responsiveSvc=l,this.dataEntryService=c,this.stationService=f,this.elementService=O,this.submitted=!1,this.loading=!0,this.error="",this.monthModified=!1,this.monthYearValue=new Date,this.bsConfig={isAnimated:!0,containerClass:"theme-blue",dateInputFormat:"MM/YYYY"},this.hour=6,this.unitOptions=De,this.hoursList=[24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],this.hasRecord=!1}ngOnInit(){this.initForm(),this.responsiveSvc.screenSize.subscribe(e=>{console.log(e)}),this.dataEntryService.dailyState.pipe((0,B.b)(e=>this.loading=!!e),(0,E.h)(e=>!!e),(0,Ae.q)(1)).subscribe(e=>{console.log(e),this.setFormState(+e.station,+e.element,e.monthYear,e.hour)})}canExit(){return!this.hasChanges||window.confirm("You have unsaved changes. Are you sure you want to leave the page?")}get f(){return this.form.controls}get isEditable(){return!!this.station&&!!this.element}get isModified(){return this.monthModified}get hasChanges(){return this.dailyGroup.toArray().filter(e=>!0===e.isDirty).length>0}onFormModified(e){this.monthModified=e}resetStation(){this.station=void 0,this.form.controls.station.reset()}onStationSelect(e){this.station=e,this.form.controls.station.setValue(e.station_id),this.loadDailyData()}resetElement(){this.element=void 0,this.form.controls.element.reset()}onElementSelect(e){this.element=e,this.form.controls.element.setValue(e.element_id),this.loadDailyData()}onSubmit(e){this.submitted=!0,!this.form.invalid&&(this.hasRecord?this.updateRecord():this.addRecord())}onDateSelection(e){console.log(e),e&&this.renderFormDays(e)}getHoursValue(e){return _().set("hours",e).startOf("hour").format("HH:mm")}onReset(){this.modalService.show(K.S,{initialState:{title:"Confirm Reset",message:"You have changes in the form below, are you sure you want to reset?",confirm:"Go Ahead",cancel:"Cancel"}}).content.onClose.subscribe(l=>{l&&(this.form.reset(),this.station=void 0,this.element=void 0,this.dataEntryService.resetDailyState(),this.initForm())})}onCancel(){this.router.navigateByUrl("/")}onOpenCalendar(e){e.monthSelectHandler=n=>{e._store.dispatch(e._actions.select(n.date))},e.setViewMode("month")}onHourSelect(e){this.hour=this.f.dayHour.value,this.loadDailyData()}getDateText(e,n){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][n-1]} ${e}`}moreInfo(){console.log("more info")}get daysArray(){return this.form.get("days")}get formDaysGroups(){return this.daysArray.controls}revertDay(e){this.modalService.show(K.S,{initialState:{title:"Confirm Revert",message:"Are you sure you want to revert to original values?",confirm:"Go Ahead",cancel:"Cancel"}}).content.onClose.subscribe(c=>{if(c)if(this.hasRecord){const f=(e<10?"0":"")+e;this.formDaysGroups[e-1]=this.getDayGroup(e,this.raw[`day${f}`],this.raw[`flag${f}`],this.raw[`period${f}`])}else this.formDaysGroups[e-1]=this.getDayGroup(e)})}resetDays(){this.form.controls.days=new i.Oe([])}getDayGroup(e,n,l,c){return new i.cw({day:new i.NI(e),value:new i.NI(n,[i.kI.min(0),i.kI.max(70)]),flag:new i.NI(l||u.M),period:new i.NI(c)})}renderFormDays(e,n=!0){let l=_(e);this.year=l.year(),this.month=l.month()+1;const c=_(`${this.year}-${this.month}`,"YYYY-MM").daysInMonth();this.resetDays();for(let f=1;f<=c;f++)this.daysArray.push(this.getDayGroup(f));n&&this.loadDailyData()}initForm(){this.form=new i.cw({station:new i.NI(null,i.kI.required),element:new i.NI(null,i.kI.required),element_seq:new i.NI(!1),monthYear:new i.NI(new Date,i.kI.required),dayHour:new i.NI(6,[i.kI.min(0),i.kI.max(24)]),temperature:new i.NI(""),precip:new i.NI(""),cloud_height:new i.NI(""),visibility:new i.NI(""),days:new i.Oe([]),total:new i.NI(null)})}setFormState(e,n,l,c){this.stationService.getStation(e).pipe((0,B.b)(f=>{this.station=f.result[0]}),(0,Me.w)(f=>this.elementService.getElement(n))).subscribe(f=>{this.element=f.result[0],this.loadDailyData()}),this.f.station.setValue(e),this.f.element.setValue(n),this.f.monthYear.setValue(l),this.monthYearValue=new Date(l),this.f.dayHour.setValue(c)}loadDailyData(){this.station&&this.element&&this.year&&this.month&&this.hour&&(this.loading=!0,this.dataEntryService.getDailyEntry(this.station.station_id,this.element.element_id,this.year,this.month,this.hour).subscribe(e=>{console.log(e),this.hasRecord=e.result.length>0,e.result.length?(this.raw=e.result[0],this.patchForm(e.result[0])):(this.resetDays(),this.renderFormDays(this.monthYearValue,!1)),this.loading=!1}))}patchForm(e){this.f.temperature.setValue(e.temperature_units),this.f.precip.setValue(e.precip_units),this.f.cloud_height.setValue(e.cloud_height_units),this.f.visibility.setValue(e.vis_units),this.formDaysGroups.forEach((n,l)=>{const c=l+1<10?`0${l+1}`:l+1;n.patchValue(Object.assign({},{day:l+1,value:e[`day${c}`],flag:e[`flag${c}`],period:e[`period${c}`]}))})}addRecord(){var e,n;let l={station_id:null===(e=this.station)||void 0===e?void 0:e.station_id,element_id:null===(n=this.element)||void 0===n?void 0:n.element_id,yyyy:this.year,mm:this.month,hh:this.hour};this.formDaysGroups.forEach((c,f)=>{const O=f+1<10?`0${f+1}`:f+1;l[`day${O}`]=c.controls.value.value,l[`flag${O}`]=c.controls.flag.value,l[`period${O}`]=c.controls.period.value}),l.entry_datetime=(new Date).toISOString(),l.temperature_units=this.f.temperature.value,l.precip_units=this.f.precip.value,l.cloud_height_units=this.f.cloud_height.value,l.vis_units=this.f.visibility.value,console.log(l)}updateRecord(){console.log(this.form.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.F0),t.Y36(Se.tT),t.Y36(A.k),t.Y36(d),t.Y36(Ue.v),t.Y36(Ie.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-daily2"]],viewQuery:function(e,n){if(1&e&&t.Gf(Qe,5),2&e){let l;t.iGM(l=t.CRH())&&(n.dailyGroup=l)}},decls:4,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["sm","12",1,"text-end"],["sm","12","class","text-end",4,"ngIf"],["sm","12"],[1,"form-group","p-3","mt-2"],["xs","12","md","6","xl","3"],[1,"mb-2"],["cLabel","","for","station"],["id","station","type","hidden","formControlName","station","aria-label","default input","cFormControl","",3,"ngClass"],["class","typeahead-selection theme form-group",4,"ngIf"],[3,"onSelection",4,"ngIf"],["col","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","element"],["id","element","type","hidden","formControlName","element","aria-label","default input","cFormControl","",3,"ngClass"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["cIcon","","name","cilCalendar"],["id","element","type","hidden","formControlName","monthYear","aria-label","default input","cFormControl","","placeholder","Station Name"],["name","monthYear","placeholder","Select Year & Month","cFormControl","","bsDatepicker","","autocomplete","off",3,"bsConfig","bsValue","ngClass","bsValueChange","onShown"],["sm","12","class","invalid-feedback",4,"ngIf"],["cLabel","","for","hoursValue"],["formControlName","dayHour","aria-label","Hour","cSelect","",3,"ngClass","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","p-3","my-4"],["xs","12","md","6","lg","3"],["formControlName","temperature","aria-label","Temperature","cSelect","",3,"ngClass"],["cLabel","","for","precip"],["formControlName","precip","aria-label","Precipitation","cSelect","",3,"ngClass"],["cLabel","","for","cloudh"],["formControlName","cloud_height","aria-label","Hour","cSelect","",3,"ngClass"],["cLabel","","for","visibility"],["formControlName","visibility","aria-label","Hour","cSelect","",3,"ngClass"],[4,"ngIf"],["formArrayName","days",4,"ngIf"],["color","info","class","mt-4",4,"ngIf"],[1,"my-4"],["xs","12 py-4"],["type","submit","cButton","","color","dark",1,"px-3"],["aria-hidden","true","size","sm",4,"ngIf"],["type","button","cButton","","color","dark",1,"px-3","mx-1",3,"click"],["type","button","cButton","","color","dark",1,"px-3",3,"click"],[1,"typeahead-selection","theme","form-group"],[1,"typeahead-selection-inner"],[1,"btn",3,"click"],["cIcon","","name","cilX"],[3,"onSelection"],["col","12",1,"invalid-feedback"],["cIcon","","name","cilXCircle"],["sm","12",1,"invalid-feedback"],[3,"value"],["md","12 mt-3 mb-3"],[1,"form-info"],["src","./assets/img/icons/info.png","alt",""],["color","link","cButton","",1,"p-0",3,"click"],["type","button","color","link","cButton","",3,"click"],["formArrayName","days"],["sm","12","md","6","lg","4","xl","3"],[1,"daily-header"],[1,"py-1"],["sm","12","md","6","lg","4","xl","3",1,"d-none","d-md-block"],["lg","4","xl","3",1,"d-none","d-lg-block"],["xl","3",1,"d-none","d-xl-block"],["md","12",4,"ngFor","ngForOf"],["md","12"],[3,"disabled","modified","group","onDirty","onRevert"],["dailyGroup",""],["color","info",1,"mt-4"],["aria-hidden","true","size","sm"]],template:function(e,n){1&e&&(t.TgZ(0,"h5"),t._uU(1),t.qZA(),t._UZ(2,"hr"),t.YNc(3,Mo,101,51,"form",0)),2&e&&(t.xp6(1),t.hij(" Daily data for the whole month ",n.monthModified," "),t.xp6(2),t.Q6J("ngIf",n.form))},directives:[s.O5,i._Y,i.JL,i.sg,a.iok,a.Yp0,h,a.eFW,i.Fj,a.oHf,i.JJ,i.u,s.mk,a.g8K,a.jOm,C.ar,q.Y5,q.Np,i.EJ,a.nqR,i.YN,i.Kr,s.sg,a.Hq3,Ee.$,w.n,G.Y,i.CE,He,a.wxo,a.ORR],pipes:[s.JJ,s.OU],styles:[".daily-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]{text-align:center;font-size:.65rem;padding-left:.3rem}.daily-header[_ngcontent-%COMP%]   c-col[_ngcontent-%COMP%]:first-child{padding-left:8%}.form-info[_ngcontent-%COMP%]{position:relative;padding:1rem .8rem .2rem 5rem;background-color:#d6ebff;border:1px solid #c2e0ff;border-radius:.25rem;color:#333}.form-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:1rem;left:.8rem;width:4rem}.form-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.form-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-top:.5rem}"]}),o})();var Y=m(1147);const Fo=[{path:"",component:b,children:[{path:"hourly",component:xe,canDeactivate:[Y.C],data:{title:"Hourly Data"}},{path:"",redirectTo:"daily",data:{title:"Data Entry"}},{path:"monthly",component:kt,canDeactivate:[Y.C],data:{title:"Monthly Data"}},{path:"hourly-wind",component:ee,canDeactivate:[Y.C],data:{title:"Hourly Wind Data"}},{path:"daily",component:qo,canDeactivate:[Y.C],data:{title:"Daily Data for Whole Month"}},{path:"synoptic",component:ft,canDeactivate:[Y.C],data:{title:"Caribbean Synoptic Data"}},{path:"agro",component:D,canDeactivate:[Y.C],data:{title:"Kenya Agromet Data"}}]}];let wo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(Fo)],Z.Bz]}),o})(),Oo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,wo,p.m]]}),o})()},9309:(I,M,m)=>{m.d(M,{d:()=>S});var s=m(1135),p=m(262),Z=m(8505),t=m(5e3),a=m(4691);const T="climsoft/v1/obselements";let S=(()=>{class b{constructor(i){this.http=i,this.state$=new s.X({elements:[],limit:10,page:1,pages:1}),this.init=!1;const _=this.state$.getValue();this.getElements(_.page,_.limit)}get elements(){return this.state$.asObservable()}adapt(i){const _={element_id:"Element ID",abbreviation:"Abbreviation",element_name:"Element Name",description:"Description",element_scale:"Element Scale",upper_limit:"Upper Limit",lower_limit:"Lower Limit",units:"Units",element_type:"Element Type",qc_total_required:"QC Total Required",selected:"Selected"};let u=[];return Object.keys(i).filter(g=>"elementId"!==g).forEach(g=>{u.push({key:_[g],value:i[g]||"No Value"})}),u}updateState(i){if(i.page){const _=this.state$.getValue().limit;this.getElements(i.page,_)}i.limit&&this.getElements(1,i.limit)}getElements(i,_){this.http.GET(`${T}?limit=${_}&offset=${(i-1)*_}`).subscribe(g=>{console.log(g),this.state$.next({elements:g.result,limit:_,page:g.page,pages:g.pages}),this.init=!0})}searchElements(i){return this.http.GET(`climsoft/v1/obselements/search?query=${i}`)}getElement(i){return this.http.GET(`${T}/${i}`)}addElement(i){return this.http.POST(`${T}`,Object.assign({},i)).pipe((0,p.K)(_=>{throw new Error(_.error.message)}),(0,Z.b)(_=>{console.log(_);const u=this.state$.getValue(),{page:g,limit:y}=u;this.getElements(g,y)}))}updateElement(i,_){return this.http.PUT(`${T}/${i}`,_).pipe((0,p.K)(u=>{throw new Error(u.error.message)}),(0,Z.b)(u=>{const g=this.state$.getValue(),{page:y,limit:A}=g;this.getElements(y,A)}))}removeElement(i){this.http.DELETE(`${T}/${i}`).pipe((0,p.K)(_=>{throw new Error(_.error.message)})).subscribe(_=>{const u=this.state$.getValue(),{page:g,limit:y}=u;this.getElements(g,y)})}}return b.\u0275fac=function(i){return new(i||b)(t.LFG(a.O))},b.\u0275prov=t.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},7160:(I,M,m)=>{m.d(M,{v:()=>S});var s=m(1135),p=m(262),Z=m(8505),t=m(5e3),a=m(4691);const T="climsoft/v1";let S=(()=>{class b{constructor(i){this.http=i,this.stations$=new s.X({stations:[],limit:10,page:1,pages:1}),this.init=!1;const _=this.stations$.getValue();this.getStations(_.page,_.limit)}get stations(){return this.stations$.asObservable()}adapt(i){const _={station_name:"Station Name",wmoid:"WMO ID",icaoid:"ICAO ID",latitude:"Latitude",longitude:"Longitude",elevation:"Elevation",qualifier:"Qualifier",geolocation_method:"Geo Location Method",geolocation_accuracy:"Geo Location Accurary",opening_datetime:"Opening",closing_datetime:"Closing",country:"Country",authority:"Authority",admin_region:"Admin Region",drainage_basin:"Drainage",waca_selection:"WACA Selection",cpt_selection:"SCP SELECTION",station_operational:"Station Operational"};let u=[];return Object.keys(i).filter(g=>-1===["station_id","station_name"].indexOf(g)).forEach(g=>{const y={};switch(y.key=_[g],y.value=i[g]||"No Value",g){case"opening_datetime":case"closing_datetime":case"closing_datetime":y.type="date";break;default:y.type=null}u.push(y)}),u}updateState(i){if(i.page){const _=this.stations$.getValue().limit;this.getStations(i.page,_)}i.limit&&this.getStations(1,i.limit)}getStations(i,_){console.log(i,_),this.http.GET(`${T}/stations?limit=${_}&offset=${(i-1)*_}`).subscribe(g=>{console.log(g),this.stations$.next({stations:g.result,limit:_,page:g.page,pages:g.pages}),this.init=!0})}getStation(i){return this.http.GET(`${T}/stations/${i}`)}searchStation(i){return this.http.GET(`${T}/stations/search?query=${i}`)}addStation(i){return this.http.POST(`${T}/stations`,Object.assign(Object.assign({},i),{station_id:"2343403"})).pipe((0,p.K)(u=>{throw new Error(u.error.message)}),(0,Z.b)(u=>{console.log(u);const g=this.stations$.getValue(),{page:y,limit:A}=g;this.getStations(y,A)}))}updateStation(i,_){return this.http.PUT(`${T}/stations/${i}`,_).pipe((0,p.K)(u=>{throw new Error(u.error.message)}),(0,Z.b)(u=>{const g=this.stations$.getValue(),{page:y,limit:A}=g;this.getStations(y,A)}))}removeStation(i){this.http.DELETE(`${T}/stations/${i}`).pipe((0,p.K)(_=>{throw new Error(_.error.message)})).subscribe(_=>{const u=this.stations$.getValue(),{page:g,limit:y}=u;this.getStations(g,y)})}getStationElements(i){return this.http.GET(`${T}/stations/${i}/station-elements`)}addStationElement(i){return this.http.POST(`${T}/station-elements`,i)}updateStationElement(i,_){return this.http.PUT(`${T}/station-elements/${i.recorded_from}/${i.described_by}/${i.recoded_with}/${i.begin_date}`,_)}getStationLocHistory(i){return this.http.GET(`${T}/station-location-histories?belongs_to=${i}`)}addStationLocHistory(i){return this.http.POST(`${T}/station-location-histories`,i)}updateStationLocHistory(i,_,u){return this.http.PUT(`${T}/station-location-histories/${i}/${_}`,u)}getStationQualifiers(i){return this.http.GET(`${T}/station-qualifiers?belongs_to=${i}`)}}return b.\u0275fac=function(i){return new(i||b)(t.LFG(a.O))},b.\u0275prov=t.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},3044:(I,M,m)=>{m.d(M,{Y:()=>H});var s=m(8505),p=m(5e3),Z=m(8306),t=m(8372),a=m(3900),T=m(4004),S=m(5032),b=m(9646),D=m(9309),i=m(3075),_=m(8184),u=m(9808);function g(x,F){1&x&&(p.TgZ(0,"div",3),p._UZ(1,"img",4),p._uU(2," searching..."),p.qZA())}function y(x,F){if(1&x&&(p.TgZ(0,"div",5),p._uU(1),p.qZA(),p.TgZ(2,"div",6),p._uU(3),p.qZA()),2&x){const d=F.item;p.xp6(1),p.AsE("",d.element_id," - ",d.abbreviation,""),p.xp6(2),p.hij(" ",d.element_name," ")}}const A=function(x){return{loading:x}};let H=(()=>{class x{constructor(d){this.elementService=d,this.onSelection=new p.vpe,this.typeaheadLoading=!1,this.typeaheadNoResults=!1,this.loading=!1,this.search="",this.errorMessage=""}ngOnInit(){this.elements$=new Z.y(d=>{d.next(this.search)}).pipe((0,t.b)(400),(0,s.b)(()=>{this.loading=!0}),(0,a.w)(d=>(console.log(d),d?this.elementService.searchElements(d).pipe((0,s.b)(()=>{this.loading=!1}),(0,T.U)(v=>v.result||[]),(0,s.b)(()=>S.Z,v=>{this.errorMessage=v&&v.message||"search failed"})):(0,b.of)([]))))}changeTypeaheadLoading(d){this.typeaheadLoading=d}onSelect(d){this.selected=d.item,this.onSelection.emit(d.item)}}return x.\u0275fac=function(d){return new(d||x)(p.Y36(D.d))},x.\u0275cmp=p.Xpm({type:x,selectors:[["app-element-selection"]],outputs:{onSelection:"onSelection"},decls:4,vars:9,consts:[["typeaheadOptionField","element_name","autocomplete","off","autocorrect","off","placeholder","Described By",1,"form-control",3,"ngModel","typeahead","typeaheadAsync","typeaheadOptionsLimit","typeaheadItemTemplate","ngClass","ngModelChange","typeaheadLoading","typeaheadOnSelect"],["class","typeahead-loading",4,"ngIf"],["itemTemplate",""],[1,"typeahead-loading"],["src","./assets/img/gif/spinner.gif","alt",""],[1,"item-heading"],[1,"item-title"]],template:function(d,v){if(1&d&&(p.TgZ(0,"input",0),p.NdJ("ngModelChange",function(C){return v.search=C})("typeaheadLoading",function(C){return v.changeTypeaheadLoading(C)})("typeaheadOnSelect",function(C){return v.onSelect(C)}),p.qZA(),p.YNc(1,g,3,0,"div",1),p.YNc(2,y,4,3,"ng-template",null,2,p.W1O)),2&d){const h=p.MAs(3);p.Q6J("ngModel",v.search)("typeahead",v.elements$)("typeaheadAsync",!0)("typeaheadOptionsLimit",7)("typeaheadItemTemplate",h)("ngClass",p.VKq(7,A,v.typeaheadLoading)),p.xp6(1),p.Q6J("ngIf",v.loading)}},directives:[i.Fj,i.JJ,i.On,_.Bp,u.mk,u.O5],styles:[".item-heading[_ngcontent-%COMP%]{font-size:.7rem}.item-title[_ngcontent-%COMP%]{font-size:.9rem}"]}),x})()},4127:(I,M,m)=>{m.d(M,{$:()=>p});var s=m(5e3);let p=(()=>{class Z{constructor(){}ngOnInit(){}}return Z.\u0275fac=function(a){return new(a||Z)},Z.\u0275cmp=s.Xpm({type:Z,selectors:[["app-infinite-loading"]],decls:2,vars:0,consts:[[1,"infinite-loader"],[1,"loader-bar"]],template:function(a,T){1&a&&(s.TgZ(0,"div",0),s._UZ(1,"div",1),s.qZA())},styles:['.infinite-loader[_ngcontent-%COMP%]{width:100%;margin:0 auto;border-radius:10px;border:4px solid transparent;position:relative;padding:1px}.infinite-loader[_ngcontent-%COMP%]:before{content:"";border:1px solid #1697ec;border-radius:10px;position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px}.infinite-loader[_ngcontent-%COMP%]   .loader-bar[_ngcontent-%COMP%]{position:absolute;border-radius:10px;top:0;right:100%;bottom:0;left:0;background:#1697ec;width:0;animation:borealisBar 1s linear infinite}@keyframes borealisBar{0%{left:0%;right:100%;width:0%}10%{left:0%;right:75%;width:25%}90%{right:0%;left:75%;width:25%}to{left:100%;right:0%;width:0%}}']}),Z})()},1773:(I,M,m)=>{m.d(M,{n:()=>F});var s=m(5e3),p=m(8306),Z=m(8372),t=m(8505),a=m(3900),T=m(4004),S=m(5032),b=m(262),D=m(9646),i=m(7160),_=m(3075),u=m(8184),g=m(9808);function y(d,v){1&d&&(s.TgZ(0,"div",4),s._UZ(1,"img",5),s._uU(2," searching..."),s.qZA())}function A(d,v){if(1&d&&(s.TgZ(0,"div",6),s.TgZ(1,"div",7),s._uU(2),s.qZA(),s.qZA()),2&d){const h=s.oxw();s.xp6(2),s.Oqu(h.errorMessage)}}function H(d,v){if(1&d&&(s.TgZ(0,"div",8),s._uU(1),s.qZA(),s.TgZ(2,"div",9),s._uU(3),s.qZA()),2&d){const h=v.item;s.xp6(1),s.AsE("",h.station_id," - ",h.station_name,""),s.xp6(2),s.hij(" ",h.element_name," ")}}const x=function(d){return{loading:d}};let F=(()=>{class d{constructor(h){this.stationService=h,this.placeholder="Station",this.onSelection=new s.vpe,this.typeaheadLoading=!1,this.typeaheadNoResults=!1,this.loading=!1,this.search="",this.errorMessage=""}ngOnInit(){this.stations$=new p.y(h=>{h.next(this.search)}).pipe((0,Z.b)(400),(0,t.b)(()=>{this.errorMessage="",this.loading=!0}),(0,a.w)(h=>h?this.stationService.searchStation(h).pipe((0,t.b)(()=>{this.loading=!1}),(0,T.U)(C=>C.result||[]),(0,t.b)(()=>S.Z,C=>{this.loading=!1,this.errorMessage=C&&C.message||"station search failed"}),(0,b.K)(C=>(this.errorMessage="station search failed",(0,D.of)(C)))):(0,D.of)([])))}changeTypeaheadLoading(h){this.typeaheadLoading=h}onSelect(h){this.selected=h.item,this.onSelection.emit(h.item)}}return d.\u0275fac=function(h){return new(h||d)(s.Y36(i.v))},d.\u0275cmp=s.Xpm({type:d,selectors:[["app-station-selection"]],inputs:{placeholder:"placeholder"},outputs:{onSelection:"onSelection"},decls:5,vars:11,consts:[["typeaheadOptionField","station_name","autocomplete","off","autocorrect","off",1,"form-control",3,"ngModel","typeahead","typeaheadAsync","typeaheadOptionsLimit","typeaheadItemTemplate","ngClass","placeholder","ngModelChange","typeaheadLoading","typeaheadOnSelect"],["class","typeahead-loading",4,"ngIf"],["ngClass","typeahead-error","class","typeahead-loading",4,"ngIf"],["itemTemplate",""],[1,"typeahead-loading"],["src","./assets/img/gif/spinner.gif","alt",""],["ngClass","typeahead-error",1,"typeahead-loading"],[1,"typeahead-error-inner"],[1,"item-heading"],[1,"item-title"]],template:function(h,C){if(1&h&&(s.TgZ(0,"input",0),s.NdJ("ngModelChange",function(w){return C.search=w})("typeaheadLoading",function(w){return C.changeTypeaheadLoading(w)})("typeaheadOnSelect",function(w){return C.onSelect(w)}),s.qZA(),s.YNc(1,y,3,0,"div",1),s.YNc(2,A,3,1,"div",2),s.YNc(3,H,4,3,"ng-template",null,3,s.W1O)),2&h){const q=s.MAs(4);s.Q6J("ngModel",C.search)("typeahead",C.stations$)("typeaheadAsync",!0)("typeaheadOptionsLimit",7)("typeaheadItemTemplate",q)("ngClass",s.VKq(9,x,C.typeaheadLoading))("placeholder",C.placeholder),s.xp6(1),s.Q6J("ngIf",C.loading),s.xp6(1),s.Q6J("ngIf",!C.loading&&C.errorMessage)}},directives:[_.Fj,_.JJ,_.On,u.Bp,g.mk,g.O5],styles:[".typeahead-loading[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.9rem}.typeahead-loading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;margin-right:.2rem}typeahead-container[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background-color:#277bc9!important}.item-heading[_ngcontent-%COMP%]{font-size:.7rem}.item-title[_ngcontent-%COMP%]{font-size:.9rem}.typeahead-error[_ngcontent-%COMP%]{margin-top:.2rem;padding:0 .3rem}.typeahead-error-inner[_ngcontent-%COMP%]{padding:.1rem .3rem;font-size:.9rem;background-color:#ffd9d9;border:1px solid #c7a9a9;border-radius:.2rem;color:#d11a1a}"]}),d})()}}]);